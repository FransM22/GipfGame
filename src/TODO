TODO make heuristics non-deterministic